/* ===== Reset ===== */
* { margin:0; padding:0; box-sizing:border-box; }

html, body{
  width:100%;
  height:100%;
  font-family: "Segoe UI", sans-serif;
  background:#d9d9d9;
  overflow:hidden;         /* ✅ NO scroll en body */
  overscroll-behavior: none;
  -webkit-text-size-adjust: 100%;
  touch-action: manipulation;
}

/* ===== Topbar ===== */
.topbar{
  height:70px;
  background:#6D93A6;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 0 18px;
  border-bottom:2px solid #000;
}

.topbar h1{
  font-size:34px;
  font-weight:900;
  letter-spacing:1px;
  text-transform:uppercase;
}

/* ✅ Tu HTML usa .actions */
.actions{
  display:flex;
  gap:12px;
  align-items:center;
}

/* (quedaba de antes, no hace daño si lo usas en otro lado) */
.topbar-actions{
  display:flex;
  gap:12px;
  align-items:center;
}

.icon-circle{
  width:46px;
  height:46px;
  border-radius:999px;
  border:2px solid #fff;
  background:rgba(255,255,255,.18);
  color:#fff;
  font-weight:900;
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  cursor:pointer;
}

/* Botones con imagen (tu HTML los usa) */
.icon-btn{
  border: none;
  background: transparent;
  padding: 6px;
  border-radius: 10px;
  cursor: pointer;
  display: inline-flex;
  align-items:center;
  justify-content:center;
}
.icon-btn img{
  height: 40px;
  width: 40px;
  display:block;
}

.container{
  height: calc(100dvh - 70px); /* ✅ antes 100vh: en tablet falla */
  padding: 12px 14px;
  display:flex;
  flex-direction:column;
  gap:10px;
  overflow: hidden;            /* ✅ evita que el header empuje el scroll */
  min-height: 0;
}

/* =========================================================
   CABECERA - ACTUALIZADA (SIN NRO ORDEN / SIN REGISTRADO)
   ========================================================= */
.header-grid{
  display: grid;

  /* ✅ NUEVAS columnas (6) */
  grid-template-columns:
    165px   /* FECHA */
    260px   /* NRO O/D */
    330px   /* PREPARADO POR */
    90px    /* INICIO */
    90px    /* FIN */
    110px;   /* T.PREP */

  grid-template-rows: auto auto;
  gap: 15px 30px;

  background: rgba(165,209,209,.9);
  align-items: stretch;
  width: 100%;
  padding: 6px 30px;
  border:2px solid #000;
}

/* --- Field general --- */
.field{
  display:flex;
  align-items:center;
  gap:4px;
  min-width:0;
}

/* Label compacto */
.field label{
  font-size:12px;
  font-weight:900;
  color:#111;
  text-transform:uppercase;
  text-align:right;
  line-height:1.05;
  white-space: nowrap;
}

/* --- Caja value --- */
.value{
  flex:1;
  height: 32px;
  background:#fff;
  border:2px solid #000;
  font-weight:800;
  font-size:10px;

  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;

  padding: 0 6px;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.value1{
  flex:1;
  height: 32px;
  background:#fff;
  border:2px solid #000;
  font-weight:800;
  font-size:8px;

  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;

  padding: 0 25px;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.value.blue{
  color:#0b57d0;
  font-weight:900;
}

#btnInicio.is-disabled{
  opacity: .45;
  cursor: not-allowed;
  filter: grayscale(20%);
}
#btnFin.is-disabled{
  opacity: .45;
  cursor: not-allowed;
  filter: grayscale(20%);
}
.btn-img.is-disabled{
  opacity: .35;
  filter: grayscale(100%);
  cursor: not-allowed;
  pointer-events: none;
}


tr.row-ok td{ background: rgba(46, 204, 113, 0.22); }
tr.row-pend td{ background: rgba(243, 156, 18, 0.22); }

/* --- Icon box (INICIO/FIN) --- */
.icon-box{
  width: 70px;
  height: 70px;
  background:#fff;
  border:2px solid #000;
  display:flex;
  align-items:center;
  justify-content:center;
}
.icon-box img{
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
}

/* =========================================================
   POSICIONAMIENTO EXACTO (ACTUALIZADO)
   Orden actual de fields:
   1 FECHA
   2 NRO O/D
   3 PREPARADO POR
   4 INICIO
   5 FIN
   6 T.PREP
   7 NRO PEDIDO
   8 CLIENTE
   9 OBS
   ========================================================= */

/* 1: FECHA (fila 1, col 1) */
.header-grid .field:nth-child(1){ grid-column:1; grid-row:1; }

/* 2: NRO O/D (fila 1, col 2) */
.header-grid .field:nth-child(2){ grid-column:2; grid-row:1; }

/* 3: PREPARADO POR (fila 1, col 3) */
.header-grid .field:nth-child(3){ grid-column:3; grid-row:1; }

/* 4: INICIO (col 4, ocupa 2 filas) */
.header-grid .field:nth-child(4){
  grid-column: 4;
  grid-row: 1 / span 2;
  flex-direction:column;
  justify-content:flex-start;
  gap:4px;
}
.header-grid .field:nth-child(4) label{
  min-width:auto;
  text-align:center;
}
.header-grid .field:nth-child(4) .icon-box{ flex:1; }

/* 5: FIN (col 5, ocupa 2 filas) */
.header-grid .field:nth-child(5){
  grid-column: 5;
  grid-row: 1 / span 2;
  flex-direction:column;
  justify-content:flex-start;
  gap:4px;
}
.header-grid .field:nth-child(5) label{
  min-width:auto;
  text-align:center;
}
.header-grid .field:nth-child(5) .icon-box{ flex:1; }

/* 6: T.PREP (col 6, ocupa 2 filas) */
.header-grid .field:nth-child(6){
  grid-column: 6;
  grid-row: 1 / span 2;
  flex-direction:column;
  justify-content:flex-start;
  gap:4px;
}
.header-grid .field:nth-child(6) label{
  min-width:auto;
  text-align:center;
}
.header-grid .field:nth-child(6) .value1{
  width: 100%;         /* ✅ usa todo el ancho de su columna */
  height: 44px;        /* ✅ más alto, más legible */
  padding: 0 10px;     /* ✅ no lo empujes con 25px */
  font-size: 15px;     /* ✅ grande pero sin recortar */
  font-weight: 900;
  line-height: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}


/* 7: NRO PEDIDO (fila 2, col 1) */
.header-grid .field:nth-child(7){ grid-column:1; grid-row:2; }

/* 8: CLIENTE (fila 2, col 2) */
.header-grid .field:nth-child(8){ grid-column:2; grid-row:2; }

/* 9: OBS (fila 2, col 3) */
.header-grid .field:nth-child(9){ grid-column:3; grid-row:2; }

/* OBS label más corto */
.header-grid .field:nth-child(9) label{ min-width:50px; }

/* --- mini ya no fuerza width fijo: lo manejamos por grid --- */
.field.mini .value{ min-width:0; }

/* ===== Toast ===== */
.toast {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #1a3f6e;
  color: #fff;
  padding: 14px 22px;
  border-radius: 10px;
  font-weight: 600;
  box-shadow: 0 8px 18px rgba(0,0,0,0.25);
  z-index: 9999;
  opacity: 0;
  transition: all .3s ease;
}
.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}
.toast.hidden { display: none; }

/* ===== Confirm ===== */
.confirm{
  position:fixed; inset:0;
  background:rgba(0,0,0,.45);
  display:flex; align-items:center; justify-content:center;
  z-index:10000;
}
.confirm.hidden{ display:none; }
.confirm-card{
  width:min(560px, 92vw);
  background:#fff;
  border-radius:16px;
  padding:18px 18px 14px;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
}
.confirm-title{ font-weight:900; font-size:18px; margin-bottom:8px; }
.confirm-msg{ font-size:16px; line-height:1.35; margin-bottom:14px; color:#222; white-space:pre-line; }
.confirm-actions{ display:flex; gap:10px; justify-content:flex-end; }
.btn-primary{
  background:#1a3f6e; color:#fff; border:none;
  padding:12px 16px; border-radius:12px; font-weight:800;
}
.btn-primary.danger{ background:#c62828; }
.btn-secondary{
  background:#e9eef4; color:#1a3f6e; border:none;
  padding:12px 16px; border-radius:12px; font-weight:800;
}

/* ===== Tabla ===== */
.table-wrap{
  flex: 1;
  min-height: 0;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  border:2px solid #000;
  background:#bfbfbf;
}
.grid{
  width:100%;
  border-collapse:collapse;
  min-width:1100px;
}
.grid thead th{
  background:#6D93A6;
  color:#fff;
  font-weight:900;
  font-size:13px;
  padding:10px 8px;
  border:2px solid #000;
  text-transform:uppercase;
  text-align:center;
}
.grid td{
  border:2px solid #000;
  padding:10px 8px;
  font-weight:400;
  font-size:13px;
  text-align:center;
}

/* Filas por estado */
.row-ok td{ background:#7CDE5A; }
.row-bad td{ background:#FF5A5A; }

/* Botón quitar */
.btn-x{
  width:30px;
  height:30px;
  border-radius:999px;
  border:2px solid #fff;
  background:#a7a7a7;
  color:#fff;
  font-weight:900;
  cursor:pointer;
}

/* ===== Responsive (tablet/chico) ===== */
@media (max-width: 1200px){
  html, body{ overflow:hidden; }
  .container{ height: calc(100dvh - 70px); }

  .header-grid{
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto;
    gap:10px;
    grid-auto-flow: row;
  }

  .header-grid .field{
    grid-column:auto !important;
    grid-row:auto !important;
  }

  /* ✅ ahora inicio/fin/tprep son 4,5,6 */
  .header-grid .field:nth-child(4),
  .header-grid .field:nth-child(5),
  .header-grid .field:nth-child(6){
    flex-direction:row;
    align-items:center;
  }

  .header-grid .field:nth-child(4) label,
  .header-grid .field:nth-child(5) label,
  .header-grid .field:nth-child(6) label{
    min-width:90px;
    text-align:right;
  }

  .header-grid .field:nth-child(4) .icon-box,
  .header-grid .field:nth-child(5) .icon-box{
    height:38px;
    font-size:18px;
  }

  .header-grid .field:nth-child(6) .value,
  .header-grid .field:nth-child(6) .value1{
    height:38px;
    font-size:14px;
  }
}

/* TABLET */
@media (max-width: 1100px){
  html, body{ overflow:auto; }
  .container{ height:auto; }

  .header-grid{
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto;
    gap: 10px;
  }

  .header-grid .field{
    grid-column: auto !important;
    grid-row: auto !important;
  }

  .field{
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }

  .field label{
    min-width: 0;
    text-align: left;
  }

  .value{
    width: 100%;
    justify-content: flex-start;
  }

  .header-grid .field:nth-child(4),
  .header-grid .field:nth-child(5),
  .header-grid .field:nth-child(6){
    flex-direction: column;
    align-items: stretch;
  }

  .icon-box{
    height: 46px;
    font-size: 20px;
  }

  .header-grid .field:nth-child(6) .value,
  .header-grid .field:nth-child(6) .value1{
    height: 46px;
    font-size: 16px;
  }

  /* OBS ahora es el 9 */
  .header-grid .field:nth-child(9){
    grid-column: 1 / -1 !important;
  }
}

/* MÓVIL */
@media (max-width: 650px){
  .header-grid{
    grid-template-columns: 1fr;
  }
  .header-grid .field:nth-child(9){
    grid-column: auto !important;
  }
}

/* ===== Alineación izquierda para textos largos ===== */
#fechaDoc,
#cliente,
#obs{
  justify-content: flex-start;
  text-align: left;
  padding-left: 10px;
}

/* ===== Modal selección de usuarios ===== */
.modal{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.modal.hidden{ display:none; }

.modal-box{
  width: min(900px, 94vw);
  height: min(700px, 84vh);
  background:#fff;
  border: 2px solid #000;
  border-radius: 12px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 14px;
  background:#6D93A6;
  color:#fff;
  border-bottom:2px solid #000;
}
.modal-head h2{
  font-size:22px;
  font-weight:900;
  margin:0;
}
.modal-close{
  border:2px solid #fff;
  background:rgba(255,255,255,.18);
  color:#fff;
  width:44px;
  height:44px;
  border-radius:10px;
  font-size:22px;
  font-weight:900;
  cursor:pointer;
}

.modal-search{
  margin: 10px 12px;
  height: 46px;
  border:2px solid #000;
  border-radius:10px;
  padding: 0 12px;
  font-size:18px;
  font-weight:700;
}

.modal-table-wrap{
  flex:1;
  overflow:auto;
  background:#f1f1f1;
  border-top:2px solid #000;
}

.modal-table{
  width:100%;
  border-collapse:collapse;
}
.modal-table th{
  position: sticky;
  top: 0;
  background:#6D93A6;
  color:#fff;
  font-weight:900;
  padding: 12px 10px;
  border-bottom:2px solid #000;
  text-align:left;
}
.modal-table td{
  padding: 14px 10px;
  border-bottom:1px solid #cfcfcf;
  font-size:18px;
  font-weight:700;
}
.modal-row{
  cursor:pointer;
  background:#fff;
}
.modal-row:hover td{
  background:#e6f2f7;
}

/* que se note que se puede clickear */
#preparadoPor{ cursor:pointer; }
